(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["groupedChunk"],{"04d1":function(e,t,n){var r=n("342f"),o=r.match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),o=n("825a"),c=n("577e"),a=n("d039"),s=n("ad6d"),i="toString",u=RegExp.prototype,l=u[i],d=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),b=l.name!=i;(d||b)&&r(RegExp.prototype,i,(function(){var e=o(this),t=c(e.source),n=e.flags,r=c(void 0===n&&e instanceof RegExp&&!("flags"in u)?s.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"4e82":function(e,t,n){"use strict";var r=n("23e7"),o=n("1c0b"),c=n("7b0b"),a=n("50c4"),s=n("577e"),i=n("d039"),u=n("addb"),l=n("a640"),d=n("04d1"),b=n("d998"),m=n("2d00"),f=n("512c"),g=[],p=g.sort,h=i((function(){g.sort(void 0)})),j=i((function(){g.sort(null)})),O=l("sort"),v=!i((function(){if(m)return m<70;if(!(d&&d>3)){if(b)return!0;if(f)return f<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)g.push({k:t+r,v:n})}for(g.sort((function(e,t){return t.v-e.v})),r=0;r<g.length;r++)t=g[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),x=h||!j||!O||!v,w=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:s(t)>s(n)?1:-1}};r({target:"Array",proto:!0,forced:x},{sort:function(e){void 0!==e&&o(e);var t=c(this);if(v)return void 0===e?p.call(t):p.call(t,e);var n,r,s=[],i=a(t.length);for(r=0;r<i;r++)r in t&&s.push(t[r]);s=u(s,w(e)),n=s.length,r=0;while(r<n)t[r]=s[r++];while(r<i)delete t[r++];return t}})},"512c":function(e,t,n){var r=n("342f"),o=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},"8dc3":function(e,t,n){"use strict";n.r(t);n("4e82"),n("b0c0");var r=n("7a23"),o={class:"w-full mb-8 py-14 text-center text-white relative"},c=Object(r["i"])("div",{class:"absolute inset-0 w-full h-full box-border bg-contain music-bg",style:{"background-image":"url(/assets/img/song-header.png)"}},null,-1),a={class:"container mx-auto flex items-center"},s={class:"z-50 text-left ml-8"},i={class:"text-3xl font-bold"},u={class:"song-price"},l={class:"container mx-auto mt-6",id:"comments"},d={class:"bg-white rounded border border-gray-200 relative flex flex-col"},b={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},m={class:"card-title"},f=Object(r["i"])("i",{class:"fa fa-comments float-right text-green-400 text-2xl"},null,-1),g={class:"p-6"},p={value:"1"},h={value:"2"},j={class:"container mx-auto"},O={class:"mb-5"},v={class:"font-bold"};function x(e,t,n,x,w,y){var _=Object(r["A"])("vee-field"),k=Object(r["A"])("ErrorMessage"),E=Object(r["A"])("vee-form");return Object(r["v"])(),Object(r["f"])("main",null,[Object(r["i"])("section",o,[c,Object(r["i"])("div",a,[Object(r["i"])("button",{type:"button",class:"z-50 h-24 w-24 text-3xl bg-white text-black rounded-full\n        focus:outline-none",onClick:t[1]||(t[1]=Object(r["N"])((function(e){return y.handleSong(w.song)}),["prevent"]))},[Object(r["i"])("i",{class:["fas",{"fa-pause":e.playing,"fa-play":!e.playing}]},null,2)]),Object(r["i"])("div",s,[Object(r["i"])("div",i,Object(r["E"])(w.song.modified_name),1),Object(r["i"])("div",null,Object(r["E"])(w.song.genre),1),Object(r["i"])("div",u,Object(r["E"])(e.$n(1,"currency","ja")),1)])])]),Object(r["i"])("section",l,[Object(r["i"])("div",d,[Object(r["i"])("div",b,[Object(r["i"])("span",m,Object(r["E"])(e.$tc("song.comment_count",{count:w.song.comment_count})),1),f]),Object(r["i"])("div",g,[w.comment_show_alert?(Object(r["v"])(),Object(r["f"])("div",{key:0,class:["text-white text-center font-bold p-4 mb-4",w.comment_alert_variant]},Object(r["E"])(w.comment_alert_message),3)):Object(r["g"])("",!0),e.userLoggedIn?(Object(r["v"])(),Object(r["f"])(E,{key:1,"validation-schema":w.schema,onSubmit:y.addComment},{default:Object(r["L"])((function(){return[Object(r["i"])(_,{as:"textarea",name:"comment",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition\n              duration-500 focus:outline-none focus:border-black rounded mb-4",placeholder:"Your comment here..."}),Object(r["i"])(k,{name:"comment",class:"text-red-600"}),Object(r["i"])("button",{type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600 block",disabled:w.comment_in_submission}," Submit ",8,["disabled"])]})),_:1},8,["validation-schema","onSubmit"])):Object(r["g"])("",!0),Object(r["M"])(Object(r["i"])("select",{class:"block mt-4 py-1.5 px-3 text-gray-800 border border-gray-300 transition\n          duration-500 focus:outline-none focus:border-black rounded","onUpdate:modelValue":t[2]||(t[2]=function(e){return w.sort=e})},[Object(r["i"])("option",p,Object(r["E"])(e.$t("song.latest")),1),Object(r["i"])("option",h,Object(r["E"])(e.$t("song.oldest")),1)],512),[[r["H"],w.sort]])])])]),Object(r["i"])("ul",j,[(Object(r["v"])(!0),Object(r["f"])(r["a"],null,Object(r["z"])(y.sortedComments,(function(e){return Object(r["v"])(),Object(r["f"])("li",{class:"p-6 bg-gray-50 border border-gray-200",key:e.docId},[Object(r["i"])("div",O,[Object(r["i"])("div",v,Object(r["E"])(e.name),1),Object(r["i"])("time",null,Object(r["E"])(e.datePosted),1)]),Object(r["i"])("p",null,Object(r["E"])(e.content),1)])})),128))])])}var w=n("5530"),y=n("1da1"),_=(n("96cf"),n("d3b7"),n("25f0"),n("159b"),n("fb6a"),n("b79f")),k=n("5502"),E={name:"Song",data:function(){return{song:"",schema:{comment:"required|min:3"},comment_in_submission:!1,comment_show_alert:!1,comment_alert_variant:"bg-blue-500",comment_alert_message:"Please wait",comments:[],sort:"1"}},beforeRouteEnter:function(e,t,n){return Object(y["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_["c"].doc(e.params.id).get();case 2:r=t.sent,n((function(e){r.exists||e.$router.push({name:"home"});var t=e.$route.query.sort;e.sort="1"===t||"2"===t?t:"1",e.song=r.data(),e.getComments()}));case 4:case"end":return t.stop()}}),t)})))()},methods:Object(w["a"])(Object(w["a"])({},Object(k["b"])(["newSong","toggleAudio"])),{},{addComment:function(e,t){var n=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){var o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=t.resetForm,n.comment_in_submission=!0,n.comment_show_alert=!0,n.comment_alert_variant="bg-blue-500",n.comment_alert_message="Please wait",c={content:e.comment,datePosted:(new Date).toString(),sid:n.$route.params.id,name:_["a"].currentUser.displayName,uid:_["a"].currentUser.uid},r.next=8,_["b"].add(c);case 8:return n.song.comment_count+=1,r.next=11,_["c"].doc(n.$route.params.id).update({comment_count:n.song.comment_count});case 11:n.getComments(),n.comment_in_submission=!1,n.comment_alert_variant="bg-green-500",n.comment_alert_message="Comment added",o();case 16:case"end":return r.stop()}}),r)})))()},getComments:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_["b"].where("sid","==",e.$route.params.id).get();case 2:n=t.sent,e.comments=[],n.forEach((function(t){e.comments.push(Object(w["a"])({docId:t.id},t.data()))}));case 5:case"end":return t.stop()}}),t)})))()},handleSong:function(e){this.playing||this.sound.playing?this.toggleAudio():this.newSong(e)}}),computed:Object(w["a"])(Object(w["a"])(Object(w["a"])({},Object(k["e"])({userLoggedIn:function(e){return e.auth.userLoggedIn},sound:function(e){return e.player.sound}})),Object(k["c"])(["playing"])),{},{sortedComments:function(){var e=this;return this.comments.slice().sort((function(t,n){return"1"===e.sort?new Date(n.datePosted)-new Date(t.datePosted):new Date(t.datePosted)-new Date(n.datePosted)}))}}),watch:{sort:function(e){e!==this.$route.query.sort&&this.$router.push({query:{sort:e}})}}};E.render=x;t["default"]=E},addb:function(e,t){var n=Math.floor,r=function(e,t){var a=e.length,s=n(a/2);return a<8?o(e,t):c(r(e.slice(0,s),t),r(e.slice(s),t),t)},o=function(e,t){var n,r,o=e.length,c=1;while(c<o){r=c,n=e[c];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==c++&&(e[r]=n)}return e},c=function(e,t,n){var r=e.length,o=t.length,c=0,a=0,s=[];while(c<r||a<o)c<r&&a<o?s.push(n(e[c],t[a])<=0?e[c++]:t[a++]):s.push(c<r?e[c++]:t[a++]);return s};e.exports=r},bb51:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"mb-8 py-20 text-white text-center relative"},c=Object(r["i"])("div",{class:"absolute inset-0 w-full h-full bg-contain introduction-bg",style:{"background-image":"url(assets/img/header.png)"}},null,-1),a={class:"container mx-auto"},s={class:"text-white main-header-content"},i={class:"font-bold text-5xl mb-5"},u={class:"w-full md:w-8/12 mx-auto"},l=Object(r["i"])("img",{class:"relative block mx-auto mt-5 -mb-20 w-auto max-w-full",src:"assets/img/introduction-music.png"},null,-1),d={class:"container mx-auto"},b={class:"bg-white rounded border border-gray-200 relative flex flex-col"},m={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},f={class:"card-title"},g={id:"playlist"};function p(e,t,n,p,h,j){var O=Object(r["A"])("AppSongItem"),v=Object(r["B"])("icon-secondary");return Object(r["v"])(),Object(r["f"])("main",null,[Object(r["i"])("section",o,[c,Object(r["i"])("div",a,[Object(r["i"])("div",s,[Object(r["i"])("h1",i,Object(r["E"])(e.$t("home.listen")),1),Object(r["i"])("p",u,Object(r["E"])(e.$t("home.main_message")),1)])]),l]),Object(r["i"])("section",d,[Object(r["i"])("div",b,[Object(r["M"])(Object(r["i"])("div",m,[Object(r["i"])("span",f,Object(r["E"])(e.$t("home.songs")),1)],512),[[v,{icon:"headphones-alt",right:!0}]]),Object(r["i"])("ol",g,[(Object(r["v"])(!0),Object(r["f"])(r["a"],null,Object(r["z"])(h.songs,(function(e){return Object(r["v"])(),Object(r["f"])(O,{key:e.docId,song:e},null,8,["song"])})),128))])])])])}var h=n("5530"),j=n("1da1"),O=(n("159b"),n("96cf"),n("b79f")),v={class:"flex justify-between items-center p-3 pl-6 cursor-pointer transition\n          duration-300 hover:bg-gray-50"},x={class:"text-gray-500 text-sm"},w={class:"text-gray-600 text-lg"},y=Object(r["i"])("i",{class:"fa fa-comments text-gray-600"},null,-1);function _(e,t,n,o,c,a){var s=Object(r["A"])("router-link");return Object(r["v"])(),Object(r["f"])("li",v,[Object(r["i"])("div",null,[Object(r["i"])(s,{to:{name:"song",params:{id:n.song.docId}},class:"font-bold block text-gray-600"},{default:Object(r["L"])((function(){return[Object(r["h"])(Object(r["E"])(n.song.modified_name),1)]})),_:1},8,["to"]),Object(r["i"])("span",x,Object(r["E"])(n.song.display_name),1)]),Object(r["i"])("div",w,[Object(r["i"])(s,{custom:"",to:{name:"song",params:{id:n.song.docId},hash:"#comments"}},{default:Object(r["L"])((function(e){var t=e.navigate;return[Object(r["i"])("span",{class:"comments",onClick:t},[y,Object(r["h"])(" "+Object(r["E"])(n.song.comment_count),1)],8,["onClick"])]})),_:1},8,["to"])])])}var k={name:"SongItem",props:["song"]};k.render=_;var E=k,S={beforeMount:function(e,t){var n="fa fa-".concat(t.value.icon," text-green-400 text-2xl");t.value.right&&(n+=" float-right"),e.innerHTML+='<i class="'.concat(n,'"></i>')}},A={name:"Home",components:{AppSongItem:E},directives:{"icon-secondary":S},data:function(){return{songs:[],maxPerPage:25,pendingRequest:!1}},created:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getSongs(),window.addEventListener("scroll",e.handleScroll);case 2:case"end":return t.stop()}}),t)})))()},methods:{getSongs:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.pendingRequest){t.next=2;break}return t.abrupt("return");case 2:if(!e.songs.length){t.next=11;break}return t.next=5,O["c"].doc(e.songs[e.songs.length-1].docId).get();case 5:return r=t.sent,t.next=8,O["c"].orderBy("modified_name").startAfter(r).limit(e.maxPerPage).get();case 8:n=t.sent,t.next=14;break;case 11:return t.next=13,O["c"].orderBy("modified_name").limit(e.maxPerPage).get();case 13:n=t.sent;case 14:n.forEach((function(t){e.songs.push(Object(h["a"])({docId:t.id},t.data()))})),e.pendingRequest=!1;case 16:case"end":return t.stop()}}),t)})))()},handleScroll:function(){var e=document.documentElement,t=e.scrollTop,n=e.offsetHeight,r=window,o=r.innerHeight,c=Math.round(t)+o===n;c&&this.getSongs()}},beforeUnmount:function(){window.removeEventListener("scroll",this.handleScroll)}};A.render=p;t["default"]=A},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},fb6a:function(e,t,n){"use strict";var r=n("23e7"),o=n("861d"),c=n("e8b5"),a=n("23cb"),s=n("50c4"),i=n("fc6a"),u=n("8418"),l=n("b622"),d=n("1dde"),b=d("slice"),m=l("species"),f=[].slice,g=Math.max;r({target:"Array",proto:!0,forced:!b},{slice:function(e,t){var n,r,l,d=i(this),b=s(d.length),p=a(e,b),h=a(void 0===t?b:t,b);if(c(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!c(n.prototype)?o(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return f.call(d,p,h);for(r=new(void 0===n?Array:n)(g(h-p,0)),l=0;p<h;p++,l++)p in d&&u(r,l,d[p]);return r.length=l,r}})}}]);
//# sourceMappingURL=groupedChunk.ad5e89c4.js.map